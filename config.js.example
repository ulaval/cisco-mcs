/* jshint esversion:8 */
import xapi from 'xapi';

/*****************************/
//Import scenarios here with syntax: import * as SCE_Name from './SCE_Name';
import * as sce_standby from './sce_standby';
import * as sce_como_type1 from './sce_como_type1';
//Add scenarios to config.scenarios below.
/****************************/




/****************************/
//Import modules below
//import * as mod_regisseur from './mod_regisseur';
/****************************/



/****************************/
//Import drivers or drivers libraries below
import * as devicesLibrary from './devicesLibrary';
import * as driversLibrary from './driversLibrary';
/****************************/






const DEBUGLEVEL = {
  LOW: 3,
  MEDIUM: 2,
  HIGH: 1,
  NONE: 0
};

const DEVICETYPE = {
  CONTROLSYSTEM: 'CONTROLSYSTEM',
  DISPLAY: 'DISPLAY',
  CAMERAPRESET: 'CAMERAPRESET',
  VIDEOOUTPUT: 'VIDEOOUTPUT',
  AUDIOINPUT: 'AUDIOINPUT',
  AUDIOOUTPUT: 'AUDIOOUTPUT',
  AUDIOINPUTGROUP: 'AUDIOINPUTGROUP',
  AUDIOOUTPUTGROUP: 'AUDIOOUTPUTGROUP',
  AUDIOREPORTER: 'AUDIOREPORTER',
  SCREEN: 'SCREEN',
  LIGHT: 'LIGHT',
  LIGHTSCENE: 'LIGHTSCENE',
  SHADE: 'SHADE',
  CAMERA: 'CAMERA',
  SOFTWAREDEVICE: 'SOFTWAREDEVICE'
};

export var config = {
  scenarios: [
    sce_standby,
    sce_como_type1,
  ],

  modules: [
   
  ],

  system: {
    killswitchGPIO: 4,
    storageFile: 'storage',
    coldBootTime: 120,                            // Temps (secondes) qui d√©termine un "cold boot"
    coldBootWait: 120,                            // Temps (secondes) √† attendre apr√®s un "cold boot"
    debugLevel: DEBUGLEVEL.HIGH,                  // Niveau de d√©bug (LOW, MEDIUM, HIGH)
    debugInternalMessages: false,                 // <true, false> Affichage des messages "xapi.Event.Messages"
    messagesPacing: 500,                          // Temps (ms) entre les messages de type "xpi.Command.Message"
    httpDispatcherClients: 2,                      // Nombre de clients HTTP concurents. Plus que 2 commence √† √™tre risqu√© selon l'utilisation des clients HTTP non g√©r√©s par MCS. Une augmentation de ~5% de performance est observ√©e entre 2 et 3.
    initDelay: 1000,                              // Temps (ms) avant l'initialisation du syst√®me
    newSessionDelay: 5000,                        // Temps (ms) pour l'ouverture d'une nouvelle session.
    forceStandby: true,                           // <true, false> Forcer un standby √† une heure pr√©cise, peu importe si un appel ou une pr√©sentation sont actifs
    forceStandbyTime: '04:00',                    // Heure √† laquelle le standby sera forc√©
    requiredPeripheralsCheckInterval: 30000,      // Temps (ms) entre les v√©rifications des p√©riph√©riques identifi√©s comme "requiredPeripheral"
    usePresenterTrack: true,                      // <true, false> D√©fini si PresenterTrack est utilis√©. Une autre valeur identique se trouve dans systemStatus
    forcePresenterTrackActivation: false,         // <true, false> Est-ce que l'activation du PresenterTrack est forc√©e par le syst√®me, peu importe si le sc√©nario actif le supporte ou pas
    presenterTrackConnector: 6,                   // Num√©ro du connecteur d'entr√©e sur lequel est connect√© la cam√©ra utilis√©e par le PresenterTrack
    settingsMenu: 'Locked',                       // <Locked, Unlocked> D√©termine si le panneau de param√®tre est v√©rouill√©
    disableAutoLightsWhenWidgetInteraction: true, // <true, false> D√©termine si le contr√¥le automatique de l'√©clairage est automatiquement d√©sactiv√© lorsqu'un widget de Light ou LightScene est touch√© par l'utilisateur
    systemReportApiKey: 'key here',                    // Cl√© d'api de "paste.ee" utilis√© pour l'envoi de rapport syst√®me
    showStatusAndPerformanceReports: true,        //Affiche le rapport de status apr√®s le boot et √† interval (pour le developement)
    mainVideoSource: 6,
    onStandby: {
      setDND: true,                              // <true, false> D√©termine si le mode "ne pas d√©ranger" est activ√© lors du standby
      clearCallHistory: true,                    // <true, false> D√©termine si l'historique d'appel est supprim√© lors du standby
      enableScenario: 'standby'                   // Sc√©nario √† activer lors du standby. Le syst√®me est livr√© avec un sc√©nario conseill√© nomm√© "standby", fichier "sce_standby"
    },
    onWakeup: {
      enableScenario: 'comotype1'                 // Sc√©nario √† activer lors de la sortie du standby (wakeup).
    }
  },
  audio: {
    extra: {
      enabled: false,
      outputGroup: 'system.audio.extra.output',
      inputGroup: 'system.audio.extra.inputs',
      setGainZero: ['system.audio.presentermics'], //Utilisez ceci pour mettre le gain √† OFF des microphones dans chacun de ces groupes.
      setStatusOff: ['AudienceMics'], //Utilisez ceci pour mettre un status √† 'off', comme "AudienceMics"
      overVolume: 75
    }
  },
  strings: {
    systemStartingColdBootTitle: 'D√©marrage', //Titre du message quand le syst√®me vient d'allumer (Cold boot)
    systemStartingColdBootText: 'Le syst√®me vient de d√©marrer. Optimisation en cours...', //Texte du message quand le syst√®me vient d'allumer (Cold boot)
    systemStartingTitle: 'D√©marrage du syst√®me', //Titre du message quand les macros viennent de d√©marrer (Warm boot)
    systemStartingText: 'Le syst√®me d√©marre. Un instant svp.', //Texte du message quand les macros viennent de d√©marrer (Warm boot)

    newSessionTitle: `Pr√©paration de votre session`, //Titre du message quand le syst√®me sort de veille (en dessous il y a une progressbar, d√©lais de ~2 √† ~5 secondes)

    endSessionTitle: 'Terminer la session ?', //Titre du message de confirmation de fermeture de session (S'affichage uniquement si aucun appel ni pr√©sentation)
    endSessionPresentation: 'Ceci mettra fin √† votre pr√©sentation.<br>Terminer la session ?', //Texte du message de confirmation de fermeture de session si une pr√©sentation est active
    endSessionCall: 'Ceci mettra fin aux communications.<br>Terminer la session ?', //Texte du message de confirmation de fermeture de session si un appel est connect√©
    endSessionCallPresentation: 'Ceci mettra fin √† votre pr√©sentation et aux communications.<br>Terminer la session ?', //Texte du message de confirmation de fermeture de session si une pr√©sentation est active ET qu'un appel est connect√©
    endSessionChoiceYes: 'Oui (Terminer la session)', //Texte du bouton "Oui"
    endSessionChoiceNo: 'Non (Annuler)', //Texte du bouton "Non"

    deviceMonitoringWaitForDevicesTitle: 'P√©riph√©riques', //Titre du message affich√© lors de l'attente des p√©riph√©riques (au boot)
    deviceMonitoringWaitForDevicesText: 'En attente des p√©riph√©riques: %DEVICES%', //Texte du message affich√© lors de l'attente des p√©riph√©riques (au boot),

    devicesMissingTitle: 'üö© Probl√®me du syst√®me üö©', //Titre du message d'erreur lorsqu'un p√©riph√©rique cesse de r√©pondre
    devicesMissingText: 'Contactez votre soutien technique.<br>P√©riph√©riques indisponibles:<br>', //Texte du message d'erreur lorsqu'un p√©riph√©rique cesse de r√©pondre
    devicesWaitingTitle: 'En attente des p√©riph√©riques...', //Texte du message lors de l'attente des p√©riph√©riques
    devicesAllConnectedTitle: 'D√©marrage du syst√®me', //Titre du message lorsque tous les appareils se sont connect√©s
    devicesAllConnectedText: 'Tous les p√©riph√©riques sont connect√©s. Un instant svp...', //Texte du mnessage lorsque tous les appareils se sont connect√©s

    presenterTrackLocked: 'üü¢ Cadrage automatique ACTIV√â üü¢', //Texte affich√© lorsque le PresenterTracking trouve le pr√©sentateur (affich√© quelques secondes)
    presenterTrackLost: 'üî¥ Cadrage automatique D√âSACTIV√â üî¥.<br>Revenez dans la zone de pr√©sentation pour le r√©activer.', //Texte affich√© lorsque le PresenterTrack ne trouve plus le pr√©sentateur (affich√© en continu)

    sendReportTitle: 'Rapport syst√®me', //Titre de la fonctionnalit√© d'envoi de rapport d'erreur
    sendReportText: 'Envoi du rapport en cours...', //Texte de la fonctionnalit√© d'envoi de rapport d'erreur lors de l'envoi
    sendReportSuccess: 'Envoi r√©ussi!<br>R√©f√©rence: ', //Texte de la fonctionnalit√© d'envoi de rapport d'erreur, succ√®s
    sendReportFailure: `√âchec de l'envoi.`, //Texte de la fonctionnalit√© d'envoi de rapport d'erreur, √©chec

    audioExtraHighVolumeTitle: `Volume √©lev√©`, //Titre du message d'avertissement de volume √©lev√©
    audioExtraHighVolumeText: `Il est recommand√© de d√©sactiver tous les microphones lorsque le syst√®me est utilis√© √† un volume si √©lev√©.<br>Voulez-vous d√©sactiver les microphones ?`, //texte du message d'avertissement de volume √©lev√©
    audioExtraHighVolumeYes: `Oui, d√©sactiver`, //Option "oui" pour le message d'avertissement de volume √©lev√©
    audioExtraHighVolumeNo: `Non, ne pas d√©sactiver`, //Option "non" pour le message d'avertissement de volume √©lev√©
    audioExtraNormalVolumeTitle: `Volume normal`, //Titre du message d'avertissement de volume normal
    audioExtraNormalVolumeText: `Le syst√®me est de nouveau utilis√© √† un volume normal.<br>Voulez-vous r√©activer les microphones ?`, //Texte du message d'avertissement de volume normal
    audioExtraNormalVolumeYes: `Oui, r√©activer`, //Option "oui" pour le message d'avertissement de volume normal
    audioExtraNormalVolumeNo: `Non, laisser d√©sactiv√©s` //Option "non" pour le message d'avertissement de volume normal
  },


  devices: [
    {
      id: 'display.projector',                      //Identification unique
      type: DEVICETYPE.DISPLAY,                     //Type = 'DISPLAY'
      name: 'PROJ',                                 //Nom, utilis√© par le driver pour la communication
      device: devicesLibrary.Display,               //Classe √† utiliser
      driver: driversLibrary.DisplayDriver_serial_sonybpj, //Driver √† utiliser par le device
      connector: 1,                                 //Connecteur HDMI de sortie sur le codec
      supportsPower: true,                          //D√©fini si l'affichage supporte les commandes d'alimentation (ON, OFF)
      supportsBlanking: true,                      //D√©fini si l'affichage supporte les commandes de blanking (BLANK, UNBLANK)
      supportsSource: false,                        //D√©fini si l'affichage supporte le changement de source (HDMI1, HDMI2, SDI)
      supportsUsageHours: false,                    //D√©fini si l'affichage supporte le rapport de temps d'utilisation
      defaultPower: 'off',                          //Alimentation par d√©faut lors du d√©marrage du syst√®me (ON, OFF)
      defaultBlanking: false,                       //Blanking par d√©faut lors du d√©marrage du syst√®me (BLANK, UNBLANK)
      blankBeforePowerOff: true,                    //D√©fini si l'affichage doit √™tre BLANK entre le moment o√π il re√ßoit la commande "OFF" et le moment o√π il est r√©ellement OFF (powerOffDelay)
      powerOffDelay: 300000,                          //D√©lais entre la commande OFF du syst√®me et le v√©ritable changement d'alimentation √† OFF
      usageHoursRequestInterval: 100000,            //Interval de demande du temps d'utilisation
      port: 1                                        //Num√©ro du port s√©rie
    },
    {
      id: 'display.monitor',
      type: DEVICETYPE.DISPLAY,
      name: 'TV',
      device: devicesLibrary.Display,
      driver: driversLibrary.DisplayDriver_CEC,
      connector: 3,
      supportsPower: true,
      supportsBlanking: false,
      supportsSource: false,
      supportsUsageHours: false,
      defaultPower: 'off',
      blankBeforePowerOff: false,
      powerOffDelay: 0,
    },
    {
      id: 'display.byod',
      type: DEVICETYPE.DISPLAY,
      name: 'BYOD',
      device: devicesLibrary.Display,
      driver: driversLibrary.DisplayDriver_NONE,
      connector: 2,
      supportsPower: false,
      supportsBlanking: false,
      supportsSource: false,
      supportsUsageHours: false,
      defaultPower: 'on',
      blankBeforePowerOff: false,
      powerOffDelay: 0,
    },
    /* AUDIO INPUTS */
    {
      id: 'audioinput.aes67',
      type: DEVICETYPE.AUDIOINPUT,
      name: 'Table Mic Pro',
      device: devicesLibrary.AudioInput,
      driver: driversLibrary.AudioOutputDriver_aes67,
      connector: 2,
      defaultMode: 'on'
    },
    {
      id: 'audioinput.presenter.ceiling',                   //Identification unique
      type: DEVICETYPE.AUDIOINPUT,                      //Type = 'AUDIOINPUT'
      name: 'Micro plafond pr√©sentateur',                           //Nom
      device: devicesLibrary.AudioInput,                //Classe √† utiliser
      driver: driversLibrary.AudioInputDriver_codecpro, //Driver √† utiliser par le device
      connector: 7,                                     //Connecteur d'entr√©e du codec
      input: 'microphone',                              //Type d'entr√©e, microphone, hdmi
      bias: 0,                                          //Biais de niveau audio, peut √™tre positif ou n√©gatif. Utilis√© par l'analyze d'entr√©e audio
      gainLowLimit: 20,                                 //Limite basse du gain de l'entr√©e
      gainHighLimit: 70,                                //Limite sup√©rieure du gain de l'entr√©e
      defaultGain: 60,                                  //Gain par d√©faut au d√©marrage du syst√®me
      gainStep: 1,                                      //Gain ajout√© ou retir√© de la valeur actuelle lorsque les fonctionas increase() et decrease() sont appel√©es
      defaultMode: 'on',                                //Mode par d√©faut lors du d√©marrage du syst√®me
      lowGain: 60,                                      //Gain "bas" (utilis√© par les widgets de type "button group")
      mediumGain: 65,                                   //Gain "moyen" (utilis√© par les widgets de type "button group")
      highGain: 70,                                     //Gain "haut" (utilis√© par les widgets de type "button group")
      boost: 70                                         //Gain "Boost, utilis√© par le module "AutoSauce"
    },
    {
      id: 'audioinput.presenter.bat1',
      type: DEVICETYPE.AUDIOINPUT,
      name: 'Micro b√¢ton',
      device: devicesLibrary.AudioInput,
      driver: driversLibrary.AudioInputDriver_codecpro,
      connector: 8,
      input: 'microphone', //microphone, hdmi, ethernet (ethernet require the "channel" property) : Connectors supported by driver AudioInput_codecpro
      bias: 0,
      gainLowLimit: 0,
      gainHighLimit: 70,
      defaultGain: 20,
      gainStep: 1,
      defaultMode: 'on',
      lowGain: 20,
      mediumGain: 50,
      highGain: 60,
      boost: 70
    },
    {
      id: 'audioinput.ceilingmic.1',
      type: DEVICETYPE.AUDIOINPUT,
      name: 'Micro plafond 1',
      device: devicesLibrary.AudioInput,
      driver: driversLibrary.AudioInputDriver_codecpro,
      connector: 1,
      input: 'microphone', //microphone, hdmi, ethernet (ethernet require the "channel" property) : Connectors supported by driver AudioInput_codecpro
      gainLowLimit: 0,
      gainHighLimit: 70,
      defaultGain: 50,
      gainStep: 1,
      defaultMode: 'on',
      lowGain: 20,
      mediumGain: 40,
      highGain: 60,
      boost: 70
    },
    {
      id: 'audioinput.ceilingmic.2',
      type: DEVICETYPE.AUDIOINPUT,
      name: 'Micro plafond 2',
      device: devicesLibrary.AudioInput,
      driver: driversLibrary.AudioInputDriver_codecpro,
      connector: 2,
      input: 'microphone', //microphone, hdmi, ethernet (ethernet require the "channel" property) : Connectors supported by driver AudioInput_codecpro
      gainLowLimit: 0,
      gainHighLimit: 70,
      defaultGain: 50,
      gainStep: 1,
      defaultMode: 'on',
      lowGain: 20,
      mediumGain: 40,
      highGain: 60,
      boost: 70
    },
    {
      id: 'audioinput.ceilingmic.3',
      type: DEVICETYPE.AUDIOINPUT,
      name: 'Micro plafond 3',
      device: devicesLibrary.AudioInput,
      driver: driversLibrary.AudioInputDriver_codecpro,
      connector: 3,
      input: 'microphone', //microphone, hdmi, ethernet (ethernet require the "channel" property) : Connectors supported by driver AudioInput_codecpro
      gainLowLimit: 0,
      gainHighLimit: 70,
      defaultGain: 50,
      gainStep: 1,
      defaultMode: 'on',
      lowGain: 20,
      mediumGain: 40,
      highGain: 60,
      boost: 70
    },




    /* CAMERA PRESETS */
    {
      id: 'campreset.presenter',            //identification unique
      name: 'Zone de pr√©sentation',                 //Nom
      type: DEVICETYPE.CAMERAPRESET,        //Type = 'CAMERAPRESET'
      device: devicesLibrary.CameraPreset,  //Classe √† utiliser
      presetName: 'Zone de pr√©sentation',            //Nom du preset dans le codec
      presetType: 'preset'
    },
    {
      id: 'campreset.board',
      name: 'Tableau',
      type: DEVICETYPE.CAMERAPRESET,
      device: devicesLibrary.CameraPreset,
      presetName: 'Tableau',
      presetType: 'preset'
    },
    {
      id: 'campreset.audience',
      name: 'Auditoire',
      type: DEVICETYPE.CAMERAPRESET,
      device: devicesLibrary.CameraPreset,
      presetName: 'Auditoire',
      presetType: 'preset'
    },

    /* CAMERAS */
    {
      id: 'camera.presenter',         //Identification unique
      type: DEVICETYPE.CAMERA,        //Type = 'CAMERA'
      name: 'Cam√©ra (pr√©sentateur)',    //Nom
      device: devicesLibrary.Camera,  //Classe √† utiliser
      peripheralRequired: false,       //P√©riph√©rique requis
      peripheralCheckMethod: 'internal',
      peripheralId: 'FDO2737J6BG',    //Num√©ro de s√©rie de la cam√©ra
      connector: 6                    //Connecteur d'entr√©e sur le codec

    },
    {
      id: 'camera.audience',
      type: DEVICETYPE.CAMERA,
      name: 'Cam√©ra (auditoire)',
      device: devicesLibrary.Camera,
      peripheralRequired: false,
      peripheralCheckMethod: 'internal',
      peripheralId: 'FDO2737J6H1',
      connector: 1
    },

    /* AUDIO INPUT GROUPS */
    {
      id: 'aig.presentationsources',          //Identification unique
      name: 'PC',                             //Nom du groupe dans "AudioConsole"
      type: DEVICETYPE.AUDIOINPUTGROUP,       //Type = 'AUDIOINPUTGROUP'
      device: devicesLibrary.AudioInputGroup, //Classe √† utiliser
      extraGain: 10                           //Gain quand le mode "Extra" connecte ce group d'entr√©e √† un groupe de sortie
    },
    {
      id: 'aig.microphones.all',
      name: 'Microphone',
      type: DEVICETYPE.AUDIOINPUTGROUP,
      device: devicesLibrary.AudioInputGroup
    },
    {
      id: 'aig.reinforcement',
      name: 'Reinforcement',
      type: DEVICETYPE.AUDIOINPUTGROUP,
      device: devicesLibrary.AudioInputGroup,
      extraGain: 15 //Needed for "Extra"
    },


    /* AUDIO OUTPUT GROUPS */
    {
      id: 'aog.room',                         //Identification unique
      name: 'Room',                           //Nom du groupe dans "AudioConsole"
      type: DEVICETYPE.AUDIOOUTPUTGROUP,      //Type = 'AUDIOOUTPUTGROUP'
      device: devicesLibrary.AudioOutputGroup //Classe √† utiliser
    },
    {
      id: 'aog.monitor',
      name: 'Monitor',
      type: DEVICETYPE.AUDIOOUTPUTGROUP,
      device: devicesLibrary.AudioOutputGroup
    },
  ],




  groups: [
    //Default general groups
    {
      id: 'system.presentation.main',
      devices: ['display.projector', 'campreset.presenter', 'camera.presenter', 'aog.room', 'screen.main']
    },

    {
      id: 'system.farend.main',
      devices: ['display.monitor', 'campreset.audience', 'camera.audience', 'aog.monitor']
    },
    {
      id: 'system.byod.main',
      devices: ['display.byod']
    },

    //Audio input configuration
    {
      id: 'system.audio.allmics',
      devices: ['audioinput.presenter.ceiling', 'audioinput.presenter.bat1', 'audioinput.ceilingmic.1', 'audioinput.ceilingmic.2', 'audioinput.ceilingmic.3']
    },
    {
      id: 'system.audio.presentermics',
      devices: ['audioinput.presenter.ceiling', 'audioinput.presenter.bat1']
    },
    {
      id: 'system.audio.presentationsources',
      devices: ['aig.presentationsources']
    },
    {
      id: 'system.audio.audiencemics',
      devices: ['audioinput.ceilingmic.1', 'audioinput.ceilingmic.2', 'audioinput.ceilingmic.3']
    },

    //Lightscenes groups
    {
      id: 'system.lightscene.standby',
      devices: []
    },
    {
      id: 'system.lightscene.idle',
      devices: []
    },
    {
      id: 'system.lightscene.presentation',
      devices: []
    },
    {
      id: 'system.lightscene.writing',
      devices: []
    },

    //Extra groups
    {
      id: 'system.audio.extra.output',
      devices: []
    },
    {
      id: 'system.audio.extra.inputs',
      devices: []
    },

  ],

  systemStatus: {
    //System status
    PresenterLocation: 'local', //System, <local, remote>, emplacement du pr√©sentateur
    PresenterTrackWarnings: 'on', //System, <on, off>, affichage des messages d'avertissement PresenterTrack
    UsePresenterTrack: 'on', //System, <on, off>, utilisation de PresenterTrack
    AutoDisplays: 'on', //System, <on, off>, gestion des affichages automatique (doit √™tre pris en charge dans le sc√©nario)
    AutoScreens: 'off', //System, <on, off>, gestion des toiles motoris√©es automatique (doit √™tre pris en charge dans le sc√©nario)
    AutoLights: 'off', //System, <on, off>, gestion de l'√©clairage automatique (doit √™tre pris en charge dans le sc√©nario)
    AutoShades: 'off', //System, <on, off>, gestion des toiles solaires automatique (doit √™tre pris en charge dans le sc√©nario)
    AutoCamPresets: 'on', //System, <on, off> gestion des presets de cam√©ra automatique (doit √™tre pris en charge dans le sc√©nario)
    AutoCamSelection: 'on', //System, <on, off> selection de la cam√©ra automatique (doit √™tre pris en charge dans le sc√©nario)
    AudienceMics: 'on', //System, <on, off> Utilisation des microphones de l'auditoire (doit √™tre pris en charge dans le sc√©nario)
    PresenterMics: 'on', //System, <on, off> Utilisation des microphones du pr√©sentateur (doit √™ter pris en charge dans le sc√©nario)
    PresenterDetected: false, //System, <true, false>, indique si le pr√©sentateur est d√©tect√© par le syst√®me (utilise le statut de PresenterTrack)
    ClearPresentationZone: 'off', //System, <on, off>, indique si la zone de pr√©sentateur doit √™tre d√©gag√©e (doit √™tre pris en charge dans le sc√©nario)
    //Scenario-specific status

  },

};





